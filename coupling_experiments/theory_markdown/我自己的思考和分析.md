重新审视目标

真正的目标：证明 Simulation 系统收敛到平衡态（$G^S \to 0$ 或等价地 $M^S \to M^*$）

原始路径（G Dominance）：
G^T → 0 (已知)  +  G^T ≥ G^S  +  G^S ≥ 0
                    ↓
            0 ≤ G^S ≤ G^T → 0
                    ↓
                G^S → 0

新路径（Energy Dominance）：
V^T → 0 (已知)  +  V^T ≥ V^S  +  V^S ≥ 0
                    ↓
            0 ≤ V^S ≤ V^T → 0
                    ↓
                V^S → 0
                    ↓
            ||M^S - M*||₂ → 0
                    ↓
                G^S → 0 (范数等价性)

---
核心问题：哪个更容易证明？

证明 $G^T \geq G^S$ 的难点

需要证明：$(\max M^T - \min M^T) \geq (\max M^S - \min M^S)$

这要求同时控制 max 和 min 在两个系统中的行为。核心引理是 $\Delta_{m^S} \geq 0$，但这需要追踪 argmax 位置的历史。

证明 $V^T \geq V^S$ 的难点

需要证明：$(M^T - M^)^T P (M^T - M^) \geq (M^S - M^)^T P (M^S - M^)$

这是一个关于加权 $L_2$ 范数的不等式。

---
关键洞察：两者的本质难度相同

两条路径的核心都是要证明同一件事：

Eviction 操作是某种"压缩"或"耗散"机制

只是"压缩"的度量方式不同：
- G 路径：Eviction 压缩 spread（$L_\infty$ 意义）
- V 路径：Eviction 压缩能量（$P$-范数意义）

问题：Simulation 的 eviction 不是标准的正交投影。它是：
高 stage 优先保留 → 低 stage 被 evict

这种"斜投影"在什么范数下是非扩张的？不清楚。

---
但是！有一个更直接的路径

关键观察：我们其实不需要 $V^T \geq V^S$ 或 $G^T \geq G^S$！

直接证明 Simulation 收敛：

V^S(t+1) < V^S(t)  +  V^S ≥ 0 有界
            ↓
        V^S → L (某极限)
            ↓
        证明 L = 0
            ↓
        G^S → 0

数值已验证：$V^S(t+1) < V^S(t)$ 100% 成立！

如果能理论证明这一点，就直接得到 Simulation 收敛，根本不需要与 Theory 比较。

---
证明 $V^S(t+1) < V^S(t)$ 的思路

情况 A：无 eviction（$\tilde{a} \geq 0$）

此时 Simulation 的演化与 Theory 相同：
$$M^S(t+1) = A M^S(t) + b(t)$$

由标准 Lyapunov 理论：
$$V^S(t+1) - V^S(t) = -(M^S - M^)^T Q (M^S - M^) < 0$$

✓ 能量严格递减

情况 B：有 eviction（$\tilde{a} < 0$）

此时需要证明 eviction 操作也减少能量。

直觉：
1. 截断负值：Stage 0 从 $a < 0$ 变为 $0$
- 能量贡献：$(a - M^_0)^2 \to (0 - M^_0)^2$
- 由于 $M^_0 > 0$，且 $|a - M^_0| > |0 - M^*_0|$（当 $a < 0$ 时）
- 能量减少！
2. Eviction 移除请求：从某些 stage $k$ 移除 tokens
- 这些 stage 的 $M^S_k$ 减小
- 如果移除的方向靠近原点，能量减少

问题：需要严格证明整体效果是能量减少。

---
更深层的思考：为什么 V 路径可能更本质？

物理图景

| 系统       | 能量处理方式                                                |
|------------|-------------------------------------------------------------|
| Theory     | 储能 (Storage)：将负 admission 转化为势能存储，产生大幅振荡 |
| Simulation | 耗散 (Dissipation)：通过 eviction 直接丢弃"不合法"的能量    |

类比：
- Theory = 无阻尼弹簧（只有内部衰减，由特征值 $|\lambda| < 1$ 控制）
- Simulation = 有额外阻尼的弹簧（eviction = 额外的能量耗散）

数学图景

Theory 的能量衰减：
$$V^T(t+1) / V^T(t) \approx |\lambda_{max}|^2 \approx 0.976$$

Simulation 的能量衰减：
$$V^S(t+1) / V^S(t) \approx |\lambda_{max}|^2 \times \text{(eviction 衰减因子)}$$

由于 eviction 是额外的耗散，Simulation 的衰减应该不慢于 Theory。

但数值显示 $V^T / V^S \approx 1.6$ 稳定，说明两者衰减率相同！

解释：eviction 的耗散作用主要体现在初始阶段（将负值截断），之后两系统以相同速率衰减。

---
结论：两条路径的本质

相同点

两条路径的核心困难都是：证明 eviction 是某种压缩/耗散操作。

不同点

| 方面       | G 路径                        | V 路径                          |
|------------|-------------------------------|---------------------------------|
| 度量       | $L_\infty$ 范数差             | 加权 $L_2$ 范数                 |
| 数学工具   | 较少（$L_\infty$ 不诱导内积） | 丰富（Lyapunov 理论、投影定理） |
| 直觉清晰度 | 高（spread 直接可视化）       | 中（能量是抽象概念）            |
| 证明难度   | 需要控制 argmax/argmin        | 只需控制整体范数                |

我的判断

V 路径可能更容易，因为：
1. 有更多的数学工具（凸分析、Lyapunov 理论）
2. 只需证明整体能量减少，不需要分别控制 max 和 min
3. 最重要：可以直接证明 Simulation 收敛，不需要与 Theory 比较

---
推荐的证明策略

策略 1：直接证明 Simulation 能量递减

目标：证明 $V^S(t+1) \leq V^S(t)$（即使有 eviction）

方法：分析 eviction 操作在 $P$-范数下的效果

优势：不需要 $V^T \geq V^S$，直接得到收敛性

策略 2：证明 Eviction 是 $P$-非扩张的

目标：证明 $P(x) - M^_P \leq x - M^_P$

其中 $y_P = \sqrt{y^T P y}$

方法：分析 eviction 的几何性质

优势：立即得到 $V^T \geq V^S$

---
总结

你的直觉是对的：把问题从 $G^T \geq G^S$ 转化为 $V^T \geq V^S$，在证明难度上没有本质简化。

但 V 路径有一个重要优势：我们可以绕过比较，直接证明 Simulation 自身的能量递减性，从而得到收敛性。

核心要证明的是：
$$V^S(t+1) \leq V^S(t) \quad \text{即使有 eviction}$$

这比证明 $V^T \geq V^S$ 或 $G^T \geq G^S$ 可能更直接、更本质。

要我用 codebase 验证一些关于 eviction 对能量影响的细节吗？比如分析 eviction 发生时能量的变化量？