# G Dominance 猜想的数学基础：势能、投影与耗散

## 1. 线性 Theory 系统：Lyapunov 稳定性与标准势能

对于线性迭代系统（Theory）：
$$ M^T(t+1) = A M^T(t) + b(t) $$
其中 $A$ 是使得 $\rho(A) < 1$ 的稳定矩阵（由 Coprime 条件保证）。

### 1.1 标准势能函数 (Standard Lyapunov Function)
根据 **Discrete-time Lyapunov Stability Theorem**，对于任何正定矩阵 $Q > 0$，必然存在唯一的正定矩阵 $P > 0$ 满足 **Discrete Lyapunov Equation**：
$$ A^\top P A - P = -Q $$

由此定义 Theory 系统的标准势能（广义能量）：
$$ V(x) = (x - x^*)^\top P (x - x^*) $$
其中 $x^*$ 是系统的平衡点。

### 1.2 能量守恒与衰减
在没有外部输入波动（$b(t) = 0$）时，系统能量随时间严格单调递减：
$$ V(M^T(t+1)) - V(M^T(t)) = - (M^T(t)-x^*)^\top Q (M^T(t)-x^*) < 0 $$
这意味着 Theory 系统就像一个**阻尼弹簧**，它的“Spread”（作为能量的一种度量）会随着时间自然衰减，但在受到扰动（$b(t)$ 变化）时，它会通过**存储势能**（Storage Function）来响应，表现为状态向量 $M^T$ 的大幅度“过冲”（Overshoot）。

---

## 2. Simulation 作为“投影动力系统” (Projected Dynamical System)

Simulation 系统可以被建模为在线性演化后施加了一个非线性算子 $\mathcal{P}$：
$$ M^S(t+1) = \mathcal{P}_{\Omega} \Big( A M^S(t) + b(t) \Big) $$
其中 $\Omega = \{ x \in \mathbb{R}^n \mid x \ge 0, \sum W_s x_s = B \}$ 是可行状态空间（Convex Polytope）。

### 2.1 投影算子的定义
算子 $\mathcal{P}_{\Omega}(z)$ 将任何违背约束的状态 $z$ 映射回 $\Omega$。在 Simulation 中，这对应于 **Admission Control** (截断负值) 和 **Eviction** (截断过载)。

### 2.2 非扩张性质 (Non-expansive Property)
这是证明 G Dominance 的核心工具。在凸分析中，向凸集的投影通常是**非扩张的**（Non-expansive）：
$$ \| \mathcal{P}_{\Omega}(x) - \mathcal{P}_{\Omega}(y) \| \le \| x - y \| $$
这意味着投影操作**永远不会增加**两点之间的距离。

如果我们可以证明 Simulation 使用的特定 Eviction 策略（优先移除低 Stage）也是某种范数下的非扩张算子，那么：
$$ \text{Energy of Sim} \le \text{Energy of Theory} $$
这直接暗示了 Simulation 的状态更“紧凑”，即 Spread 更小。

---

## 3. 范数等价性 (Norm Equivalence) 与 Spread

您关心的 $G$ (Spread) 本质上是 $L_\infty$ 范数的变体，而 Lyapunov 理论通常基于 $L_2$ 范数。

### 3.1 有限维空间的等价性
在有限维向量空间 $\mathbb{R}^n$ 中，所有范数都是**等价的**。存在常数 $c_1, c_2 > 0$ 使得：
$$ c_1 \|x\|_2 \le G(x) \le c_2 \|x\|_2 $$

**意义**：虽然 $L_2$ 能量和 $G$ Spread 的具体数值不同，但它们的**收敛行为和有界性**是一致的。既然投影 $\mathcal{P}$ 压缩了系统的“体积”（$L_2$ 能量），它通常也会压缩系统的“直径”（$L_\infty$ Spread）。

---

## 4. 凸序 (Convex Order) 与随机序理论

这是描述“波动大小”最本质的数学工具，比单纯的范数比较更精细。

### 4.1 凸序定义
对于两个随机变量（或状态分布）$X$ 和 $Y$，如果对于所有凸函数 $\phi$ 都有：
$$ \mathbb{E}[\phi(X)] \ge \mathbb{E}[\phi(Y)] $$
则称 $X$ 在**凸序 (Convex Order)** 上大于 $Y$，记为 $X \ge_{cx} Y$。

### 4.2 应用于 G Dominance
*   $G(x) = \max(x) - \min(x)$ 是一个**凸函数**。
*   Theory 系统保留了所有的波动（线性响应）。
*   Simulation 系统对波动进行了**截断 (Truncation/Censoring)**。

在随机序理论中，截断操作（例如 $\min(X, c)$ 或 $\max(X, 0)$）通常会**减小**变量在凸序上的大小（即减小方差和极差）。
**结论**：如果能证明 Simulation 是 Theory 的某种“条件截断”，则直接由 Jensen 不等式或凸序性质得出 $G^T \ge G^S$。

---

## 5. 有偏好的投影 (Biased Projection) 与 Eviction

Simulation 的 Eviction 不是简单的几何投影（寻找欧几里得距离最近的点），而是一种 **Oblique Projection（斜投影）** 或 **Priority-based Truncation**。

*   **标准正交投影**：均匀地减少所有分量以满足约束。
*   **Eviction 投影**：强制将低权重分量（Low Stage）置为 0，保留高权重分量。

**耗散性分析**：
这种策略比正交投影更具“破坏性”。它完全抹除了部分状态变量的信息（能量）。从能量角度看，这是一种**高耗散 (High Dissipation)** 机制。
它不仅将状态拉回可行域，而且是沿着特定的轴（低 Stage 轴）强行压缩。这种“维度坍缩”效应进一步加强了 $G^S$ 变小的结论。

---

## 6. 能量耗散机制：物理总结

结合上述理论，我们可以构建如下物理图景：

| 特性 | Theory 系统 | Simulation 系统 |
| :--- | :--- | :--- |
| **动力学类型** | 线性保守/储能系统 | 非线性耗散系统 |
| **能量处理** | **存储 (Storage)**: 将扰动转化为势能，导致 $M^T$ 偏离并大幅振荡。 | **耗散 (Dissipation)**: 通过 $\mathcal{P}$ 算子直接丢弃扰动能量（Token）。 |
| **数学算子** | $x \to Ax$ (保范数或微弱衰减) | $x \to \mathcal{P}(Ax)$ (强压缩/非扩张) |
| **Spread 表现** | **Overshoot**: 为了由负转正，必须产生巨大的振幅。 | **Damping**: 遇到边界直接停止，无反弹。 |

### 核心论证逻辑
1.  **Theory 是基准**：它完整地通过线性动力学传递输入方差。
2.  **Simulation 是 Theory 的子集**：它是 Theory 加上一个 **耗散投影算子 $\mathcal{P}$**。
3.  **投影压缩 Spread**：由于 $\mathcal{P}$ 是非扩张的（在凸序意义下甚至是压缩的），Simulation 的轨迹必然被“包裹”在 Theory 的轨迹及其凸包内部。
4.  **结论**：$G^S(t)$ 被 $G^T(t)$ 所控制 (Dominance)。